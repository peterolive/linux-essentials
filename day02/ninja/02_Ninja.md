# 02 Ninja

> Ninja: replace_with_your_name

[TOC]

## Practice

> Resources files have been included in src directory

``` shell
src/
├── data
│   ├── NC-EST2015-AGESEX-RES.csv
│   └── grades.csv
└── drama
    └── midsummer_nights_dream.html

2 directories, 3 files
```

### Echo and redirect

> 1. Use `echo` and redirect `>` or `>>` to create a file which contains the following content
> 2. Use `cat` to check if the result is correct

``` shell
Hello World
The quick brown fox jumps over the lazy dog
A journey of a thousand miles begins with a single step
```

``` shell
# paste your command and output here
```

### Midsummer nights dream

> Everything can be regarded as data
>
> The play script has been stored in `linux-essentials/day02/` directory with suffix `.html`, if you don't see it, use `find` to find it.
>
> After you find the file, use `grep` to find:
>
> * Line numbers of the character `QUINCE`'s dialog.
> * (Hint: use option `-n` to display line numbers)

``` shell
# paste your command and output here
```

### Look into the data

> [Population estimates of America](http://www.census.gov/popest/data/datasets.html) data has been put into `linux-essentials/day02/src/data/`, file name `NC-EST2015-AGESEX-RES.csv`. Let's look into the data:

``` shell
# How many lines in this file?
#peter@peter-VirtualBox:~/workspace/linux-essentials/day02/src/data$ wc NC-EST2015-AGESEX-RES.csv 
  307   307 20831 NC-EST2015-AGESEX-RES.csv
# Which fields (headers) are presented in this data file?
# peter@peter-VirtualBox:~/workspace/linux-essentials/day02/src/data$ head NC-EST2015-AGESEX-RES.csv 
SEX,AGE,CENSUS2010POP,ESTIMATESBASE2010,POPESTIMATE2010,POPESTIMATE2011,POPESTIMATE2012,POPESTIMATE2013,POPESTIMATE2014,POPESTIMATE2015
0,0,3944153,3944160,3951330,3963087,3926540,3931141,3949775,3978038
0,1,3978070,3978090,3957888,3966551,3977939,3942872,3949776,3968564
0,2,4096929,4096939,4090862,3971565,3980095,3992720,3959664,3966583
0,3,4119040,4119051,4111920,4102470,3983157,3992734,4007079,3974061
0,4,4063170,4063186,4077551,4122294,4112849,3994449,4005716,4020035
0,5,4056858,4056872,4064653,4087709,4132242,4123626,4006900,4018158
0,6,4066381,4066412,4073013,4074993,4097605,4142916,4135930,4019207
0,7,4030579,4030594,4043046,4083225,4084913,4108349,4155326,4148360
0,8,4046486,4046497,4025604,4053203,4093177,4095711,4120903,4167887
# How many types of SEX do you see in the data?
# 
# How many lines of SEX=2 in the data? (Hint: use grep with pattern: ^2, )
# peter@peter-VirtualBox:~/workspace/linux-essentials/day02/src/data$ grep ^2 NC-EST2015-AGESEX-RES.csv
2,0,1929877,1929882,1932910,1934660,1918823,1921613,1929449,1942904
2,1,1947217,1947229,1937556,1941029,1942479,1927402,1931375,1939269
2,2,2004731,2004737,2002177,1944592,1948000,1950071,1935991,1939979
2,3,2014490,2014496,2010648,2008174,1950628,1954558,1957483,1943417
2,4,1985620,1985630,1993239,2015971,2013540,1956426,1961199,1964111
2,5,1984764,1984770,1988080,1998260,2020907,2018871,1962561,1967310
2,6,1991062,1991082,1993603,1993166,2003137,2026129,2024870,1968544
2,7,1973503,1973512,1979907,1998873,1998343,2008689,2032494,2031242
2,8,1981033,1981038,1971142,1985234,2004219,2004066,2015285,2039062
2,9,2028657,2028667,2018378,1976452,1990570,2009985,2010659,2021886
2,10,2036545,2036552,2044895,2023730,1981857,1996340,2016680,2017346
2,11,2011151,2011159,2010714,2050365,2029312,1987837,2003233,2023586
2,12,2006098,2006105,2009630,2016326,2056014,2035367,1994846,2010241
2,13,2013099,2013123,2014717,2015269,2021755,2061882,2042116,2001602
2,14,2030439,2030463,2022701,2020689,2021012,2027897,2068915,2049167
2,15,2065798,2065842,2060560,2029389,2027062,2027839,2035734,2076753
2,16,2100105,2100158,2098220,2068334,2036902,2035192,2037134,2045025
2,17,2132142,2132181,2123529,2108189,2078089,2047458,2047152,2049112
2,18,2195382,2195450,2185272,2135893,2120208,2091111,2062176,2061954
2,19,2243250,2243405,2236505,2199119,2148993,2134246,2107128,2078192
2,20,2210810,2210977,2236672,2250427,2212409,2162825,2150114,2123067
2,21,2131096,2131207,2146873,2250703,2264588,2227025,2179456,2166784
2,22,2086845,2086923,2098806,2161923,2265827,2280663,2245270,2197776
2,23,2057772,2057844,2066160,2114925,2177680,2282730,2299862,2264424
2,24,2085300,2085371,2082255,2082592,2131182,2194862,2302374,2319408
2,25,2101042,2101108,2112297,2098904,2098816,2148386,2214495,2322049
2,26,2055217,2055293,2058475,2127925,2114333,2115377,2167162,2233433
2,27,2108218,2108291,2101848,2072852,2142580,2129882,2133288,2185163
2,28,2096644,2096706,2112560,2115196,2086191,2156902,2146491,2149931
2,29,2105137,2105194,2097973,2124462,2127241,2099212,2171916,2161579
2,30,2124866,2124932,2136744,2108562,2135227,2139100,2113094,2185746
2,31,1982063,1982132,2016077,2146177,2118163,2145568,2151378,2125468
2,32,1992371,1992435,1981455,2024567,2154670,2127378,2156394,2162451
2,33,1943287,1943335,1969936,1989151,2032191,2162905,2137112,2166123
2,34,1923012,1923061,1913458,1977044,1996181,2039715,2171871,2146121
2,35,1975518,1975593,1973699,1920135,1983482,2003257,2047905,2180134
2,36,1911492,1911543,1922791,1979512,1926096,1989836,2010831,2055478
2,37,1981059,1981105,1962229,1927969,1984875,1931976,1996862,2017940
2,38,2072160,2072223,2052176,1966855,1932785,1990182,1938503,2003325
2,39,2197391,2197449,2175745,2056136,1971037,1937394,1995795,1944284
2,40,2192025,2192083,2197964,2178924,2059522,1974777,1942194,2000626
2,41,2067167,2067224,2089576,2200499,2181324,2062408,1978607,1946164
2,42,2047451,2047505,2050930,2091373,2202297,2183459,2065491,1981947
2,43,2069115,2069167,2062862,2052204,2092791,2203951,2185890,2068346
2,44,2121229,2121296,2103936,2063717,2053204,2094057,2205835,2187962
2,45,2271418,2271480,2236654,2104140,2063886,2053608,2095203,2206861
2,46,2288779,2288842,2290942,2235941,2103336,2063540,2054118,2095675
2,47,2297017,2297079,2297533,2289236,2234300,2102379,2063366,2054083
2,48,2301062,2301109,2299367,2294985,2286811,2232309,2101346,2062616
2,49,2341230,2341267,2336640,2296017,2291692,2283785,2230032,2099680
2,50,2359941,2359986,2355369,2332408,2292024,2288007,2280640,2227286
2,51,2273865,2273919,2289194,2350587,2327601,2287431,2283994,2276939
2,52,2293600,2293632,2283423,2283723,2344784,2321828,2282387,2279256
2,53,2239000,2239038,2268480,2277403,2277408,2338484,2316102,2277046
2,54,2198445,2198481,2196807,2261745,2270454,2270517,2332003,2309943
2,55,2181236,2181263,2183771,2189509,2254181,2262891,2263429,2324887
2,56,2081372,2081399,2108684,2176129,2181585,2245814,2255009,2255835
2,57,2031031,2031052,2036521,2100466,2167709,2172840,2237219,2246694
2,58,1960120,1960152,1963767,2027962,2091634,2158434,2163908,2228294
2,59,1887398,1887420,1914774,1954730,2018833,2081989,2148934,2154665
2,60,1875624,1875655,1874501,1905438,1944959,2008611,2071869,2138784
2,61,1813519,1813542,1828708,1864418,1895023,1934041,1997711,2060944
2,62,1850490,1850514,1815999,1817226,1853126,1883175,1922402,1986021
2,63,1811555,1811581,1898264,1803145,1804628,1840490,1870596,1909879
2,64,1389236,1389270,1414222,1883450,1789241,1790730,1826744,1857069
2,65,1407451,1407476,1405839,1402505,1867842,1774132,1776052,1812107
2,66,1390865,1390900,1381541,1393042,1389840,1850722,1758337,1760795
2,67,1400459,1400488,1423562,1367303,1379305,1375958,1832243,1741227
2,68,1236376,1236397,1254117,1407341,1351886,1364040,1361081,1812428
2,69,1147565,1147584,1161048,1238279,1389829,1334673,1347423,1344721
2,70,1097510,1097536,1108504,1144774,1221299,1370476,1316930,1329818
2,71,1049175,1049204,1050349,1091402,1127733,1202733,1350590,1298089
2,72,1010549,1010575,1021291,1032444,1073402,1108773,1183363,1328954
2,73,949097,949119,955658,1002043,1013531,1053416,1089027,1162411
2,74,927863,927902,927165,935634,981707,992542,1032543,1067619
2,75,899069,899118,906215,905698,914620,959263,970796,1010164
2,76,823266,823310,828129,882883,883041,891297,935833,947283
2,77,823446,823499,818306,804295,858330,857905,866942,910536
2,78,797665,797715,799408,792288,779364,831257,831915,840960
2,79,791961,792028,781027,771114,765048,751847,803078,803984
2,80,764952,765013,770509,750270,741477,735010,723310,772956
2,81,717995,718062,716533,736823,718174,709010,704052,693056
2,82,698438,698526,695544,681499,701794,683106,675643,671319
2,83,654978,655059,658441,657386,645034,663421,647071,640387
2,84,612590,612685,611338,617772,617811,605200,623984,608958
2,85,577904,578015,577352,568677,575940,574911,564605,582641
2,86,521091,521192,526153,532075,525249,531057,531680,522563
2,87,463105,463206,467575,479816,486601,479238,486253,487256
2,88,423183,423293,420437,421475,433928,439081,433947,440879
2,89,361309,361429,365732,373964,376531,386660,392978,388762
2,90,298615,298710,306925,320846,329362,330922,341430,347555
2,91,241188,241302,240151,264941,278508,284861,287889,297448
2,92,200317,200397,205379,203920,226098,237047,243648,246825
2,93,157941,158024,158882,171167,171116,188794,199426,205146
2,94,125918,125984,126948,129530,140877,140360,155637,164983
2,95,98766,98825,99341,101452,104171,113086,113732,125996
2,96,73799,73856,75139,77460,79970,81490,89432,90302
2,97,53582,53605,54118,57159,59533,61255,62779,69285
2,98,36641,36675,37532,40116,42857,44359,46208,47272
2,99,26193,26214,26074,27030,29320,31112,32517,34064
2,100,44202,44246,45058,47556,50661,53902,58008,61886
2,999,156964212,156969328,157258820,158427085,159581546,160720625,161952064,163189523
# What's the POPESTIMATE2015 value of AGE=25 for different SEX? (Hint: think about the pattern before grep)
# Your answers:
```

``` shell
# paste your command and output here.
# if the output is too long, don't paste all, use ... ... instead.
```

## Challenge

### Find the difference

> In this section, you are going to learn a new command `diff` which will help you to find the difference between files. Like `cp`, use `diff` is easy:

``` shell
$ diff file1 file2 # compare difference between file1 and file2
```

**Example**

``` shell
$ cat fruits1 # what inside file fruits1
apple
banana
peach
$ cat fruits2 # what inside file fruits2
appppple
banana
blueberry
peachd
$ diff fruits1 fruits2 # find difference between fruits1 and fruits2
1c1 # there is difference between 1 line in first file, 1 line in second file
< apple # what in first file
---
> appppple # what in second file
3c3,4 # there is difference between 3 line in first file, 3-4 line in second file
< peach # what in first file
---
> blueberry # what in second file
> peachd
```

> Try to create two files like above and and use `diff` to find the difference
>
> Note: if `diff` output nothing, it means content of two files are the same.

**Test symbolic link**

> Remember the concept about symbolic link. Assume we have two symbolic links `a` and `b` point to the same file `1`. Either writing to `a` or `b` will result in modifying the same file.


> 1. Create a file contains only `hello` called `a`
> 2. Create a soft symbolic link file `b` linking to `a` use `ln -s`
> 3. Create a copy of `a` and name it as `c` use `cp`
> 4. Use `diff` to see if there is any difference between `a` and `b`
> 5. Use `diff` to see if there is any difference between `a` and `c`
> 6. Write `world to c` to `c` use `echo`
> 7. Use `diff` to see if there is any difference between `a` and `c`
> 8. Write `world to b` to `b` use `echo`
> 9. Use `diff` to see if there is any difference between `a` and `b`
> 10. Find something?

``` shell
peter@peter-VirtualBox:~/workspace/a$ echo hello > a
peter@peter-VirtualBox:~/workspace/a$ ls
a  b  hello1.txt  hello2.txt  hello.txt
peter@peter-VirtualBox:~/workspace/a$ cat a
hello
peter@peter-VirtualBox:~/workspace/a$ ln -s a b
peter@peter-VirtualBox:~/workspace/a$ ls
a  b  hello1.txt  hello2.txt  hello.txt
peter@peter-VirtualBox:~/workspace/a$ cp a c
peter@peter-VirtualBox:~/workspace/a$ ls
a  b  c  hello1.txt  hello2.txt  hello.txt
peter@peter-VirtualBox:~/workspace/a$ diff a b
peter@peter-VirtualBox:~/workspace/a$ diff a c
peter@peter-VirtualBox:~/workspace/a$ echo "world to c" > c 
peter@peter-VirtualBox:~/workspace/a$ diff a c
1c1
< hello
---
> world to c
peter@peter-VirtualBox:~/workspace/a$ echo "world to b" > b
peter@peter-VirtualBox:~/workspace/a$ diff a b
```

### Powerful Pipeline

> Use `history` , `grep` and `wc` to find out how many `cd` command you have used in history
>
> Only ONE SINGLE command line is enough

``` shell
peter@peter-VirtualBox:~/workspace/a$ history | grep cd | wc
    172     564    4692
```
